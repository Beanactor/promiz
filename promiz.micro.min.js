(function(){function n(k,l){function g(){var d;try{d=b&&b.c}catch(h){return b=h,a=2,g()}p(d,function(){a=1;g()},function(){a=2;g()},function(){if(1==a&&"function"==typeof k)try{b=k(b)}catch(f){return b=f,c(4)}if(2==a&&"function"==typeof l)try{b=l(b),a=1}catch(h){return b=h,c(4)}if(b==e)return b=TypeError(),c(4);p(d,function(){c(3)},function(){c(4)},function(){1==a?c(3):c(4)})})}function p(a,h,f,e){if("object"==typeof b&&"function"==typeof a)try{var c=0;a.call(b,function(a){c++||(b=a,h())},function(a){c++||
(b=a,f())})}catch(g){b=g,f()}else e()}function c(d){a=d;3==a&&m.map(function(a){a.b(b)});4==a&&m.map(function(a){a.a(b)})}var e=this;e.g=e;var a=0,b=0;k=k||0;l=l||0;var m=[];e.b=function(d){a||(b=d,a=1,setImmediate(function(){g()}))};e.a=function(d){a||(b=d,a=2,setImmediate(function(){g()}))};e.c=function(d,c){var f=new n(d,c);m.push(f);f.f=e;3==a&&f.b(b);4==a&&f.a(b);return f};e.e=function(a){return e.c(null,a)}}var q={defer:function(){return new n(0,0)}};"undefined"!==typeof module&&(module.d=q)})();
